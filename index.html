<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <title>AR – Esteira Industrial</title>

    <!-- AFRAME -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>

    <!-- ARJS (versão estável — funciona no GitHub Pages) -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

    <!-- Gesture Handler oficial do AR.js -->
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/src/components/gesture-detector.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/src/components/gesture-handler.js"></script>

    <style>
      body { margin: 0; overflow: hidden; }
    </style>
  </head>

  <body>
    <a-scene
      embedded
      vr-mode-ui="enabled: false"
      renderer="antialias: true; alpha: true"
      arjs="sourceType: webcam; debugUIEnabled: false;"
    >

      <!-- marcador hiro -->
      <a-marker preset="hiro">

        <!-- container com gestos -->
        <a-entity id="modelContainer" gesture-handler>

          <!-- modelo 3D -->
          <a-gltf-model 
            id="esteira"
            src="esteira.glb"
            position="0 0 0"
            rotation="-90 0 0"
            scale="1.4 1.4 1.4"
            animation-mixer
          ></a-gltf-model>

          <!-- painel preto -->
          <a-plane 
            id="painel"
            position="0 -0.7 0"
            rotation="-90 0 0"
            width="0.7"
            height="0.28"
            color="#111"
            opacity="0.85"
          ></a-plane>

          <!-- luz de status -->
          <a-circle 
            id="statusLight"
            position="-0.22 -0.7 0.01"
            radius="0.06"
            color="red"
          ></a-circle>

          <!-- texto -->
          <a-text 
            id="statusText"
            value="Aquecida"
            align="center"
            position="0 -0.63 0.01"
            scale="0.4 0.4 0.4"
            color="white"
          ></a-text>

        </a-entity>

      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      // Estado inicial
      let quente = true;

      const luz = document.querySelector("#statusLight");
      const texto = document.querySelector("#statusText");

      // Clique para alternar estado
      window.addEventListener("click", () => {
        quente = !quente;

        if (quente) {
          luz.setAttribute("color", "red");
          texto.setAttribute("value", "Aquecida");
        } else {
          luz.setAttribute("color", "green");
          texto.setAttribute("value", "Normal");
        }
      });
    </script>

  </body>
</html>
